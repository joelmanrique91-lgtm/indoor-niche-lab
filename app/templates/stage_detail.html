{% extends 'base.html' %}
{% block content %}
<h1>{{ stage.name }}</h1>
<img class="stage-banner" src="{{ url_for('static', path=stage_image_path) }}" alt="Etapa del cultivo de hongos en condiciones reales" loading="lazy">
<p><a href="/stages">← Volver a etapas</a></p>

{% for step in steps %}
<article class="card stage-step-card">
  <img
    class="stage-step-image"
    src="{{ url_for('static', path=step.image_path) }}"
    alt="Miniatura del proceso: {{ step.title }}"
    loading="lazy"
  >
  <h2>{{ loop.index }}. {{ step.title }}</h2>
  <p style="white-space: pre-line;">{{ step.content }}</p>
  <p><strong>Materiales:</strong></p>
  <ul>
    {% for tool in step.tools_json %}
    <li>{{ tool }}</li>
    {% endfor %}
  </ul>
  <p><strong>Costo estimado:</strong> USD {{ '%.2f'|format(step.estimated_cost_usd or 0) }}</p>
</article>
{% else %}
<p>Esta etapa todavía no tiene pasos cargados.</p>
{% endfor %}
{% endblock %}
